<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gameday Lines</title>
  <style>
    :root {
      --navy: #1a2b49;
      --gold: #d4af37;
      --green: #2e7d32;
      --light-gray: #f8f8f8;
      --gray-border: #ccc;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: var(--light-gray);
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      background-color: var(--navy);
      color: var(--gold);
      padding: 25px 15px; /* increased padding */
      margin: 0 0 25px 0;
      font-size: 36px; /* bigger font */
      font-weight: 900;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.6); /* subtle shadow */
      letter-spacing: 1.5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #fff;
      margin-top: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    th, td {
      padding: 10px;
      border: 1px solid var(--gray-border);
      text-align: center;
    }

    .matchup-header {
      background-color: var(--navy);
      color: var(--gold);
      font-weight: bold;
      text-align: center;
      font-size: 18px;
    }

    .bet-button {
      background-color: var(--green);
      color: white;
      padding: 5px 10px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 4px;
      transition: background-color 0.3s;
    }

    .bet-button:hover {
      background-color: #27672d;
    }

    .betslip {
      max-width: 600px;
      margin: 20px auto;
      background-color: #fff;
      border: 2px solid var(--navy);
      border-radius: 8px;
      padding: 15px;
      display: none;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .betslip.show {
      display: block;
    }

    .betslip h2 {
      text-align: center;
      margin-top: 0;
      background-color: var(--navy);
      color: var(--gold);
      padding: 10px;
      border-radius: 4px;
    }

    .bet-item {
      border-bottom: 1px solid #ddd;
      padding: 8px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .bet-odds {
      font-size: 12px;
      color: #555;
    }

    .remove-button {
      background-color: #ccc;
      color: #333;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }

    .remove-button:hover {
      background-color: #bbb;
    }

    .send-button {
      display: block;
      width: 100%;
      background-color: var(--green);
      color: white;
      padding: 12px;
      text-align: center;
      text-decoration: none;
      border-radius: 4px;
      margin-top: 15px;
      font-weight: bold;
      transition: background-color 0.3s;
    }

    .send-button.disabled {
      background-color: #ccc;
      pointer-events: none;
      cursor: default;
    }

    .send-button:hover:not(.disabled) {
      background-color: #27672d;
    }

    .parlay-summary, .wager-section {
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px solid #ddd;
      text-align: center;
    }

    .wager-section input {
      width: 80px;
      padding: 5px;
      font-size: 14px;
      margin-left: 5px;
      text-align: right;
    }

    @media (max-width: 768px) {
      .betslip {
        margin: 10px;
        width: auto;
      }
    }
  </style>
</head>
<body>

  <h1>Gameday Lines</h1>

  <table>
    <thead>
      <tr>
        <th style="width: 25%;">Team</th>
        <th style="width: 25%;">Spread / Run Line</th>
        <th style="width: 25%;">Moneyline</th>
        <th style="width: 25%;">Total</th>
      </tr>
    </thead>
    <tbody>
      <!-- Dodgers @ Brewers -->
      <tr><td class="matchup-header" colspan="4">Dodgers @ Brewers</td></tr>
      <tr>
        <td>Dodgers</td>
        <td>-1.5 (+100)<br /><button class="bet-button" onclick="addToSlip('Dodgers @ Brewers', 'Dodgers -1.5 (+100)')">Bet</button></td>
        <td>-165<br /><button class="bet-button" onclick="addToSlip('Dodgers @ Brewers', 'Moneyline Dodgers -165')">Bet</button></td>
        <td>Over 8.5 (-120)<br /><button class="bet-button" onclick="addToSlip('Dodgers @ Brewers', 'Over 8.5 (-120)')">Bet</button></td>
      </tr>
      <tr>
        <td>Brewers</td>
        <td>+1.5 (-130)<br /><button class="bet-button" onclick="addToSlip('Dodgers @ Brewers', 'Brewers +1.5 (-130)')">Bet</button></td>
        <td>+125<br /><button class="bet-button" onclick="addToSlip('Dodgers @ Brewers', 'Moneyline Brewers +125')">Bet</button></td>
        <td>Under 8.5 (-120)<br /><button class="bet-button" onclick="addToSlip('Dodgers @ Brewers', 'Under 8.5 (-120)')">Bet</button></td>
      </tr>

      <!-- Phillies @ Giants -->
      <tr><td class="matchup-header" colspan="4">Phillies @ Giants</td></tr>
      <tr>
        <td>Phillies</td>
        <td>-1.5 (+125)<br /><button class="bet-button" onclick="addToSlip('Phillies @ Giants', 'Phillies -1.5 (+125)')">Bet</button></td>
        <td>-140<br /><button class="bet-button" onclick="addToSlip('Phillies @ Giants', 'Moneyline Phillies -140')">Bet</button></td>
        <td>Over 8.5 (-120)<br /><button class="bet-button" onclick="addToSlip('Phillies @ Giants', 'Over 8.5 (-120)')">Bet</button></td>
      </tr>
      <tr>
        <td>Giants</td>
        <td>+1.5 (-155)<br /><button class="bet-button" onclick="addToSlip('Phillies @ Giants', 'Giants +1.5 (-155)')">Bet</button></td>
        <td>+110<br /><button class="bet-button" onclick="addToSlip('Phillies @ Giants', 'Moneyline Giants +110')">Bet</button></td>
        <td>Under 8.5 (-120)<br /><button class="bet-button" onclick="addToSlip('Phillies @ Giants', 'Under 8.5 (-120)')">Bet</button></td>
      </tr>
    </tbody>
  </table>

  <div id="betslip" class="betslip">
    <h2>Bet Slip</h2>
    <div id="betSlipList"></div>
    <div class="parlay-summary" id="parlaySummary"></div>
    <div class="wager-section">
      Wager Amount ($): <input type="number" id="wagerInput" min="1" value="10" oninput="updatePayout()">
      <div id="payoutDisplay"></div>
    </div>
    <a id="sendButton" class="send-button disabled" href="#">Bet Now</a>
  </div>

  <script>
    const betSlip = [];
    const oddsList = [];
    const matchupList = [];

    function parseAmericanOdds(betText) {
      let match = betText.match(/\(([-+]\d+)\)/);
      if (match) return parseInt(match[1]);
      match = betText.match(/([-+]\d+)$/);
      if (match) return parseInt(match[1]);
      return null;
    }

    function americanToDecimal(odds) {
      if (odds > 0) return 1 + odds / 100;
      return 1 + 100 / Math.abs(odds);
    }

    function decimalToAmerican(decimal) {
      if (decimal >= 2) return "+" + Math.round((decimal - 1) * 100);
      return "-" + Math.round(100 / (decimal - 1));
    }

    function isDuplicateBet(bet) {
      return betSlip.includes(bet);
    }

    function calculateParlayOdds(oddsArray) {
      if (oddsArray.length === 0) return null;
      let decimalProduct = 1;
      oddsArray.forEach(o => decimalProduct *= americanToDecimal(o));
      return decimalToAmerican(decimalProduct);
    }

    function calculateParlayOddsValue() {
      if (oddsList.length === 0) return null;
      let decimalProduct = 1;
      oddsList.forEach(o => decimalProduct *= americanToDecimal(o));
      return decimalProduct;
    }

    function addToSlip(matchup, bet) {
      if (isDuplicateBet(bet)) {
        alert("You have already added this bet to your slip.");
        return;
      }
      const odds = parseAmericanOdds(bet);
      if (odds === null) return;
      betSlip.push(bet);
      oddsList.push(odds);
      matchupList.push(matchup);
      updateBetSlip();
    }

    function removeBet(index) {
      betSlip.splice(index, 1);
      oddsList.splice(index, 1);
      matchupList.splice(index, 1);
      updateBetSlip();
    }

    function updateBetSlip() {
      const slip = document.getElementById('betslip');
      const betSlipList = document.getElementById('betSlipList');
      const sendButton = document.getElementById('sendButton');
      const parlaySummary = document.getElementById('parlaySummary');
      const payoutDisplay = document.getElementById('payoutDisplay');
      const wagerInput = document.getElementById('wagerInput');

      if (betSlip.length === 0) {
        slip.classList.remove('show');
        sendButton.classList.add('disabled');
        sendButton.href = "#";
        sendButton.textContent = "Bet Now";
        betSlipList.innerHTML = '';
        parlaySummary.innerHTML = '';
        payoutDisplay.innerHTML = '';
        return;
      }

      slip.classList.add('show');
      betSlipList.innerHTML = '';

      betSlip.forEach((bet, index) => {
        const odds = oddsList[index];
        const matchup = matchupList[index];
        betSlipList.innerHTML += `
          <div class="bet-item">
            ${index + 1}. <strong>${matchup}</strong> - ${bet} <span class="bet-odds">(Odds: ${odds > 0 ? "+" + odds : odds})</span>
            <button class="remove-button" onclick="removeBet(${index})">Remove</button>
          </div>`;
      });

      const parlayOdds = calculateParlayOdds(oddsList);
      const wager = parseFloat(wagerInput.value);

      if (parlayOdds && wager && wager > 0) {
        parlaySummary.innerHTML = `Combined Parlay Odds: ${parlayOdds}`;

        const decimalOdds = calculateParlayOddsValue();
        const payout = (wager * decimalOdds).toFixed(2);

        payoutDisplay.innerHTML = `Estimated Payout: $${payout}`;

        const smsLines = betSlip.map((b, i) => `${matchupList[i]} - ${b}`).join('\n');
        let smsBody = `My Bet Slip:\n${smsLines}\nCombined Parlay Odds: ${parlayOdds}\nWager: $${wager}\nEstimated Payout: $${payout}`;
        smsBody = encodeURIComponent(smsBody);

        sendButton.href = `sms:+16175830712?body=${smsBody}`;
        sendButton.classList.remove('disabled');
        sendButton.textContent = "Bet Now";
      } else {
        parlaySummary.innerHTML = `Combined Parlay Odds: ${parlayOdds || ''}`;
        payoutDisplay.innerHTML = '';
        sendButton.href = "#";
        sendButton.classList.add('disabled');
        sendButton.textContent = "Bet Now";
      }
    }

    function updatePayout() {
      const wagerInput = document.getElementById('wagerInput');
      const payoutDisplay = document.getElementById('payoutDisplay');
      const wager = parseFloat(wagerInput.value);

      if (isNaN(wager) || wager <= 0 || oddsList.length === 0) {
        payoutDisplay.innerHTML = '';
        updateBetSlip(); // sync button & SMS
        return;
      }

      const decimalProduct = calculateParlayOddsValue();
      const payout = (wager * decimalProduct).toFixed(2);
      payoutDisplay.innerHTML = `Estimated Payout: $${payout}`;

      updateBetSlip(); // update SMS link with new wager & payout
    }
  </script>

</body>
</html>